{% extends "base.html" %}
{% load static %}

{% block title %}CTSPR{% endblock %}

{% block head %}
  {% include 'partials/_head_table.html'%}
{% endblock %}

{% block content %}
  <div class="container jobs">

    <h1 class="text-center">Ofertas de Empleo</h1>
    <hr>
     <div class="row branch-map">
      <iframe src="https://maps.google.com/maps?q={{ branch }},%20PR&t=&z=11&ie=UTF8&iwloc=&output=embed" width="100%" height="320" frameborder="0" style="border:0" allowfullscreen></iframe>
     </div>
    <h2>Sucursal de {{ branch }}</h2>
    <i class="bi bi-telephone"></i> <a href="{{ branch.phone }}"> {{ branch.phone }}</a>


    <table class="table-striped table-hover table-sm" id="table">
      <thead>
        <tr>
          <th scope="col">Posición</th>
          <th scope="col">Pueblo</th>
          <th scope="col">Job ID</th>
        </tr>
      </thead>
      <tbody>
        {% for job in jobs %}
        <tr>
          <td>{{ job.title }}</td>
          <td>{{ job.town }}</td>
          <td>{{ job.jobID }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    <script>
      var table = new Tabulator("#table", {
        height:"70vh",
        layout:"fitColumns",
        responsiveLayout:true,
        pagination:"local",
        paginationSize:30,
        paginationSizeSelector:[40, 60, 100, true],
        movableColumns:true,
        paginationCounter:"rows",
        headerSortTristate:true,
        columns:[
        {title:"Sec",formatter:"rownum", headerSort:false, hozAlign:"center", maxWidth:55},
        {title:"Posición", field:"title", headerFilter:"input", headerFilterParams:{valuesLookup:true, clearable:true}, headerFilterPlaceholder:"Filtrar..."},
        {title:"Pueblo"  , field:"town" , headerFilter:"list", maxWidth:160, headerFilterParams:{valuesLookup:true, clearable:true}, headerFilterPlaceholder:"Filtrar..."},
        {title:"Job ID", field:"jobid", hozAlign:"center", maxWidth:130},
        ],
      });
    </script>
    
  </div>

  <script>
      
  </script>

{% endblock %}